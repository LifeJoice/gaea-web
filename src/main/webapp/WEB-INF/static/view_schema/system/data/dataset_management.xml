<?xml version="1.0" encoding="UTF-8"?>
<!--SCHEMA id必须全局唯一。会进入系统的cache。-->
<ur-schema id="GAEA_SCHEMA_DATASET_MANAGEMENT">
    <data>
        <!--primary-table标识这个ds的主要表，主要是分页用，以这个主表的id为分页依据。（不要->如果我们只是用来增、编辑的话，就不需要data-sql部分的内容了。）-->
        <dataset id="DS_DATASET_MANAGEMENT" primary-table="GAEA_SYS_DATASET">
        </dataset>
    </data>
    <views title="数据集管理">
        <actions id="myActions">
            <button id="btnNew" name="btnNew" html-value="新增" link-view-id="createDialog" action="add"/>
            <button id="btnEdit" name="btnEdit" html-value="编辑" link-view-id="editDialog" action="update"/>
            <button id="btnDel" name="btnDel" html-value="删除" action="deleteSelected"/>
            <button id="btnSyncDbDataSet" name="btnSyncDbDataSet" html-value="刷新缓存数据集"
                    submit-url="/gaea/data/dataset/synchronize-db-dataset" msg="同步数据库数据集至缓存"/>
        </actions>
        <!--工作流弹出框-->
        <wf-dialog id="wfDialog" html-id="wfDialog" title="流程审批" html-width="500" html-height="500"
                   submit-url="/admin/wf-demo/new-dayoff/complete.do">
            <button id="btnApproved" name="btnApproved" html-value="批准" type="approve"/>
            <button id="btnNotApproved" name="btnNotApproved" html-value="不批准" type="notApprove"/>
            <button id="btnCancel" name="btnCancel" html-value="取消" type="cancel"/>
        </wf-dialog>
        <!--新增弹出框-->
        <crud-dialog id="createDialog" html-id="createDialog" content-url="/gaea/data/dataset/showCreateUpdateForm"
                     submit-url="/gaea/data/dataset/add"/>
        <!-- 编辑弹出框 -->
        <crud-dialog id="editDialog" html-id="editDialog" id-field="id"
                     content-url="/gaea/data/dataset/showCreateUpdateForm" submit-url="/gaea/data/dataset/add"
                     load-data-url="/gaea/data/dataset/load-edit-data"/>
        <!--列表定义-->
        <grid id="dataset-grid" title="数据集管理" with-workflow="true" render-to="urgrid" display-undefined-column="true"
              dataset-id="DS_USER_MANAGEMENT" ds-primary-table="GAEA_SYS_USERS" page-size="20">
            <column id="id" name="id" label="ID" db-column-name="ID"
                    visible="false" sortable="true" html-width="200" primary-key="true" data-type="String"/>
            <column id="name" name="name" label="名称" db-column-name="name"
                    visible="true" sortable="false" html-width="200" data-type="String"/>
            <column id="primaryTable" name="primaryTable" label="主数据表" db-column-name="PRIMARY_TABLE"
                    visible="true" sortable="false" html-width="120" data-type="String"/>
            <column id="authorityType" name="authorityType" label="权限校验方式" db-column-name="AUTHORITY_TYPE"
                    visible="true" sortable="false" html-width="120" data-type="string"
                    dataset-id="DS_DATASET_AUTHORITY_TYPE">
                <query-condition is-multiple="true" component="select"/>
            </column>
            <column id="cacheType" name="cacheType" label="缓存方式" db-column-name="CACHE_TYPE"
                    visible="true" sortable="false" html-width="120" data-type="string"
                    dataset-id="DS_DATASET_CACHE_TYPE">
                <query-condition is-multiple="true" component="select"/>
            </column>
            <column id="sql" name="sql" label="SQL语句" db-column-name="DATA_SQL"
                    visible="true" sortable="false" html-width="300" data-type="String"/>
            <column id="dsData" name="dsData" label="静态数据" db-column-name="DS_DATA"
                    visible="true" sortable="false" html-width="300" data-type="String"/>
        </grid>
    </views>
</ur-schema>
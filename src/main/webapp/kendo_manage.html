<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="js/framework/jquery/jquery-1.11.1.min.js" type="text/javascript"></script>
        <script src="kendo/kendo.all.min.js" type="text/javascript"></script>
        <link href="kendo/style/kendo.common.min.css" rel="stylesheet" type="text/css"/>
        <link href="kendo/style/kendo.bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="main_kendo.css" rel="stylesheet" type="text/css"/>
        <script>
            $(function() {
                var baseUrl = "product",
                        dataSource = new kendo.data.DataSource({
                            transport: {
                                read: {
                                    url: baseUrl + "/list-all.do",
                                    dataType: "jsonp"
                                },
                                update: {
                                    url: baseUrl + "/Products/Update",
                                    dataType: "jsonp"
                                },
                                destroy: {
                                    url: baseUrl + "/Products/Destroy",
                                    dataType: "jsonp"
                                },
                                create: {
                                    url: baseUrl + "/save.do",
                                    dataType: "jsonp"
                                },
                                parameterMap: function(options, operation) {
                                    if (operation !== "read" && options.models) {
                                        return {models: kendo.stringify(options.models)};
                                    }
                                }
                            },
                            batch: true,
                            pageSize: 20
//                            schema: {
//                                model: {
////                                    id: "ProductID",
//                                    fields: {
//                                        name { validation: { required: true } },
//                                        description { validation: { required: true} },
//                                        status { type: "boolean" },
//                                        lastPrice { type: "number", validation: { min: 0, required: true } }
//                                    }
//                                }
//                            }
                        });



                $("#grid").kendoGrid({
                    dataSource: dataSource,
                    pageable: true,
                    height: 430,
                    toolbar: ["create"],
                    columns: [
                        {field: "name", title: "产品名称"},
                        {field: "description", title: "产品描述"},
                        {field: "status", title: "产品状态"},
                        {field: "lastPrice", title: "价格"}
                    ],
                    editable: "popup"
                });
//                $("#grid").kendoGrid({
//                    columns:["Name",
//                        {field:"Phone",title:"Phone numbers"}],
//                    dataSource:[
//                    {Name:"Iverson",Phone:"13922211223"},
//                    {Name:"Vincent",Phone:"13955511223"},
//                    {Name:"Fred",Phone:"13312311543"}
//                ]
//                });
                $("#add").click(function() {
                    dataSource.add({name:"Iverson",description:"aaa",status:"aaa",lastPrice:"12"});
                    dataSource.sync();
                });
            });
        </script>
    </head>
    <body>
        <div>
            <div><h2>产品管理</h2></div>
            <div>
                <div id="tool-bar">
                    <input type="button" id="add" value="新增">
                </div>
                <div id="grid"></div>
            </div>
        </div>
    </body>
</html>
